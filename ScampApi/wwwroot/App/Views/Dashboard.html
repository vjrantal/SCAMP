<script type="text/ng-template" id="GroupUsers.html">
	<div class="modal-header" style="border-style:none">
		<h3 class="modal-title col-md-10">{{group.name}}</h3>
		<button class="btn btn-primary pull-right" ng-click="done()">Done</button>
	</div>
	<div class="modal-body pull-left">
		<div class="col-lg-12">
			<div class="widget">
				<div class="widget-header">
					<span class="col-md-3 text-right">Search: </span>
					<div class="input-group col-md-6">
						<input class="form-control" ng-model="searchUser.name">
						<span class="glyphicon glyphicon-search input-group-addon"></span>
					</div>
				</div>
				<div class="widget-body no-padding">
					<div class="table-responsive">
						<table class="table">
							<thead>
								<tr>
									<th class="text-center">ID</th>
									<th>Name</th>
									<th>Role</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="user in group.admins | filter:searchUser">
									<td class="text-center">{{user.userId}}</td>
									<td>{{user.name}}</td>
									<td>Admin</td>
									<td>
										<button class="btn btn-default btn-danger" ng-click="removeAdmin(user)"  ng-show="currentUser.isSystemAdmin || isGroupAdmin">Remove Admin</button>
									</td>
								</tr>
								<!--<tr ng-repeat="user in members | filter:searchUser">
									<td class="text-center">{{user.userId}}</td>
									<td>{{user.name}}</td>
									<td>Member</td>
									<td></td>
								</tr>-->
								<tr ng-repeat="user in users | filter:searchUser | notAdmin:group.admins" ng-show="currentUser.isSystemAdmin || isGroupAdmin">
									<td class="text-center">{{user.userId}}</td>
									<td>{{user.name}}</td>
									<td></td>
									<td>
										<button class="btn btn-default btn-success" ng-click="addAdmin(user)">Add as Admin</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer" style="border-style:none">
	</div>
</script>

<div id="dashboard" ng-init="populate()">
    <div id="dashboard-header" class="row">
        <div class="col-xs-12">
            <h3>Resource Insights</h3>
        </div>
        <div class="col-xs-2 col-sm-1 col-sm-offset-1">
        </div>
    </div>
    <div class="row-fluid">
        <div id="dashboard_tabs" class="col-xs-11">
            <div id="dashboard-overview" class="row" style="visibility: visible; position: relative;">
               <div class="col-sm-12">
                  <div class="row">
                      <div id="ow-marketplace" class="col-sm-4">
                        <h4 class="page-header">
                            MY DASHBOARD<!--  <input type="button" value="Test WS" ng-click="testWebSockStateUpdate()" />-->
                        </h4>
                    </div>
                      <div id="ow-donut" class="col-sm-2">
                          <span class="chartTitle">Usage</span>
                          <div id="usageDonutChart" style="width:120px;height:120px;"></div>
                      </div>
                      <div id="ow-donut" class="col-sm-2">
                          <span class="chartTitle">State</span>
                          <div id="stateDonutChart" style="width:120px;height:120px;"></div>
                      </div>
                      <div id="ow-donut" class="col-sm-2">
                          <span class="chartTitle">Group</span>
                          <div id="groupDonutChart" style="width:120px;height:120px;"></div>
                      </div>
                      <div id="ow-donut" class="col-sm-2">
                          <span class="chartTitle">Type</span>
                          <div id="typeDonutChart" style="width:120px;height:120px;"></div>
                      </div>
                   </div>
                   <div class="row">
                       <div class="col-sm-12">
                           <table class="table m-table table-bordered table-hover table-heading">
                               <thead>
                                   <tr>
                                       <th>State</th>
                                       <th>Resource</th>
                                       <th>Type</th>
                                       <th>Group</th>
                                       <th>Action</th>
                                       <th>Remaining</th>
                                   </tr>
                               </thead>
                               <tbody>
                                   <tr ng-repeat="resource in resources">
                                       <td class="text-center">{{resource.stateDescription}}</td>
                                       <td>{{resource.name}}</td>
                                       <td>{{resource.resourceTypeDesc}}</td>
                                       <td>{{resource.groupName}}</td>
                                       <td>
                                           <div class="btn-group action-cell" ng-show="rscStateDescMapping[resource.state].allowableActions.length>0">
                                               <button class="btn btn-primary btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false">{{rscStateDescMapping[resource.state].allowableActions[0]}}</button>
                                               <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                                   <span class="caret"></span>
                                                   <span class="sr-only">Toggle Dropdown</span>
                                               </button>
                                               <ul class="dropdown-menu" role="menu">
                                                   <li ng-repeat="action in rscStateDescMapping[resource.state].allowableActions"><a href="#" data-resource-id="{{resource.id}}">{{action}}</a></li>
                                               </ul>
                                           </div>
                                       </td>
                                       <td>
                                           <div class="progress">
                                               <div class="progress-bar progress-bar-{{resource.usageEscalation}}" role="progressbar" aria-valuenow="{{resource.remaining}}" aria-valuemin="0" aria-valuemax="100" style="width: {{resource.remaining}}%;">
                                                   {{resource.remaining}}%
                                               </div>
                                           </div>
                                       </td>
                                   </tr>
                               </tbody>
                           </table>
                       </div>
                    </div>
               </div>
            </div>
        </div>
    </div>

    <!--END-->
	<div class="row">
	</div>
</div>